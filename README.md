AV Converter 程序设计说明书
1. 项目概述
1.1 项目背景
随着数字内容创作和分享的日益普及，音视频格式转换成为了一个常见的需求。然而，大多数现有的格式转换工具依赖在线服务，这不仅存在数据安全风险，还因网络延迟导致转换效率低下。为了解决这些问题，本人开发了 AV Converter，一款高效、安全的本地音视频格式转换软件。
1.2 项目目标
数据安全：完全在本地运行，无需上传文件至服务器，确保数据隐私。
高效转换：采用优化算法，转换速度远超传统 1:1 视频时长转换。
功能全面：支持多种音视频格式、分辨率预设、编码器选择以及质量调节。
用户友好：简洁直观的界面设计，易于上手，适合不同层次的用户。
2. 程序组成
2.1 主要组件
主界面：用户交互界面，提供文件选择、格式设置、转换启动等功能。
文件处理模块：负责加载和保存音视频文件。
格式转换模块：调用 FFmpeg 库进行音视频格式转换。
元数据读取模块：使用 FFprobe 获取音视频文件的元数据。
日志记录模块：记录转换过程中的详细信息，便于调试和用户参考。
进度显示模块：实时显示转换进度，提供用户反馈。
2.2 技术栈
编程语言：Python 3.8+
GUI 框架：PySide6
多媒体处理库：FFmpeg 和 FFprobe
操作系统支持：Windows, macOS, Linux
3. 程序设计
3.1 架构设计
AV Converter 采用分层架构设计，主要分为用户界面层、业务逻辑层和数据处理层。这种设计使得代码结构清晰，便于维护和扩展。
3.1.1 用户界面层
用户界面层负责与用户交互，提供直观的操作界面。主要功能包括：
文件选择对话框
格式设置选项
转换进度显示
日志输出窗口
3.1.2 业务逻辑层
业务逻辑层处理用户请求，调用数据处理层的功能，完成音视频文件的转换。主要功能包括：
文件加载与保存
格式转换逻辑
元数据读取与显示
转换任务管理
3.1.3 数据处理层
数据处理层负责具体的音视频处理任务，调用 FFmpeg 和 FFprobe 完成文件的读取、转换和元数据提取。主要功能包括：
音视频格式转换
元数据读取
日志记录
3.2 功能模块设计
3.2.1 文件处理模块
负责加载和保存音视频文件，支持多种格式的读取和写入。
3.2.2 格式转换模块
调用 FFmpeg 库，根据用户设置的参数（如输出格式、分辨率、编码器等）进行音视频格式转换。
3.2.3 元数据读取模块
使用 FFprobe 获取音视频文件的元数据，包括文件大小、时长、音频采样率、视频帧率等，并在主界面显示。
3.2.4 日志记录模块
记录转换过程中的详细信息，包括成功和失败的步骤，便于用户和开发者进行调试。
3.2.5 进度显示模块
实时更新转换进度，提供用户反馈，确保转换过程的透明性。
4. 功能规格
4.1 功能列表
文件选择：从磁盘中选择音频/视频文件。
元数据显示：显示文件大小、时长、音频采样率、视频帧率、流信息等。
输出格式选择：支持多种输出格式，包括 mp4、webm、mkv、mp3、wav、mov。
分辨率预设：提供多种分辨率预设（1080p、4K、2K、720p、保持原分辨率、自定义）。
编码器选择：支持多种视频编码器（libx264、libx265、vp9、复制）和音频编码器（aac、libmp3lame、opus、复制）。
质量调节：通过 CRF/质量滑块调节视频质量，适用于 x264/x265/vp9。
音频比特率选择：提供音频比特率选择器，调节音频质量。
缩放与目标分辨率：支持可选的缩放因子或目标分辨率设置。
转换启动：开始转换任务，显示进度和日志。
4.2 功能详细说明
4.2.1 文件选择
用户可以通过文件选择对话框从磁盘中选择音频或视频文件。支持的文件格式包括但不限于 mp4、avi、mov、mkv、mp3、wav。
4.2.2 元数据显示
加载文件后，软件会自动读取并显示文件的元数据，包括：
文件大小
时长
音频采样率
视频帧率
流信息（视频流、音频流等）
4.2.3 输出格式选择
用户可以选择输出文件的格式，支持的格式包括：
mp4、webm、mkv、mp3、wav、mov
4.2.4 分辨率预设
用户可以选择以下分辨率预设：
1080p (1920x1080)、4K (3840x2160)、2K (2560x1440)、720p (1280x720)、保持原分辨率、自定义（用户可以输入自定义的宽度和高度）
4.2.5 编码器选择
用户可以选择以下视频编码器：
libx264、libx265、vp9、复制（直接复制原始视频流，不进行重新编码）
用户可以选择以下音频编码器：
Aac、libmp3lame、opus、复制（直接复制原始音频流，不进行重新编码）
4.2.6 质量调节
对于支持的视频编码器（如 x264、x265、vp9），用户可以通过 CRF/质量滑块调节视频质量。CRF 值越低，质量越高，文件大小也越大。
4.2.7 音频比特率选择
用户可以选择音频的比特率，调节音频质量。支持的比特率范围为 32 kbps 至 320 kbps。
4.2.8 缩放与目标分辨率
用户可以选择缩放因子或输入目标分辨率，进一步调整视频尺寸。例如，用户可以选择将视频宽度缩放为原始宽度的 50%，或者直接输入目标分辨率（如 800x600）。
4.2.9 转换启动
用户点击“开始转换”按钮后，软件将启动转换任务，并实时显示转换进度和日志信息。
5. 开发情况
5.1 开发环境
操作系统：Windows 10/11, macOS 10.15 及以上, Linux (64-bit)
编程语言：Python 3.8+
GUI 框架：PySide6
多媒体处理库：FFmpeg 和 FFprobe
开发工具：PyCharm, Visual Studio Code
5.2 开发进度
需求分析：已完成
设计阶段：已完成
编码阶段：已完成
测试阶段：正在进行
5.3 预计发布日期
预计同年九月发布正式版本。
6. 测试结果
6.1 测试环境
操作系统：Windows 10, macOS 10.15, Ubuntu 20.04
硬件配置：
CPU：Intel Core i9-13900h
内存：32GB DDR5
存储：2TB SSD
软件版本：
Python 3.13.6
PySide6 6.9.1
FFmpeg 4.4
 
AV Converter 用户手册
1. 欢迎使用 AV Converter
AV Converter是一款高效、安全的本地音视频格式转换软件。它支持多种音视频格式的转换，提供丰富的功能选项，包括分辨率调整、编码器选择、质量控制等。本手册将指导您如何安装和使用该软件。
2. 系统要求
在安装 AV Converter 之前，请确保您的计算机满足以下系统要求：
•	操作系统：Windows 10/11, macOS 10.15 及以上, Linux (64-bit)
•	Python：3.8 或更高版本
•	内存：至少 4GB RAM
•	存储空间：至少 100MB 的可用磁盘空间
•	依赖库：FFmpeg 和 FFprobe（需安装并配置在系统 PATH 中）
3. 安装步骤
3.1 安装 Python
1.	访问 Python 官方网站。
2.	下载并安装最新版本的 Python（推荐 3.8 或更高版本）。
3.	确保 Python 已正确安装，并且 python 命令可以在命令行中使用。
3.2 安装 FFmpeg 和 FFprobe
1.	访问 FFmpeg 官方网站。
2.	下载适合您操作系统的 FFmpeg 二进制文件。
3.	解压下载的文件，并将 ffmpeg 和 ffprobe 的路径添加到系统的 PATH 环境变量中。
4.	在命令行中运行以下命令，验证 FFmpeg 和 FFprobe 是否已正确安装：
ffmpeg -version
ffprobe -version
3.3 安装 PySide6
1.	打开命令行工具。
2.	运行以下命令安装 PySide6：
pip install PySide6
3.4 下载并运行 AV Converter
1.	下载最新版本的 AV Converter 源代码。
2.	解压下载的文件。
3.	打开命令行工具，切换到解压后的目录。
4.双击dist目录下的exe文件
4. 使用方法
4.1 主界面介绍
 <img width="865" height="977" alt="image" src="https://github.com/user-attachments/assets/acfaba96-a726-4342-8c00-30e36042e7b4" />

启动 AV Converter 后，您将看到主界面，包含以下主要部分：
•	文件选择区域：用于选择需要转换的音视频文件。
•	格式设置区域：用于选择输出格式、分辨率、编码器等。
•	转换控制区域：包含“开始转换”按钮和进度显示。
•	日志显示区域：显示转换过程中的详细日志信息。
4.2 选择文件
1.	点击“选择文件”按钮。
2.	在文件选择对话框中，导航到包含音视频文件的目录。
3.	选择一个文件并点击“打开”。
4.3 设置输出格式
1.	在“输出格式”下拉菜单中，选择目标文件格式（如 mp4、webm、mkv 等）。
2.	在“视频分辨率”下拉菜单中，选择分辨率预设（如 1080p、4K、自定义等）。
3.	在“视频编码器”下拉菜单中，选择视频编码器（如 libx264、libx265 等）。
4.	在“音频编码器”下拉菜单中，选择音频编码器（如 aac、libmp3lame 等）。
5.	如果需要，调整 CRF/质量滑块或音频比特率选择器。
4.4 开始转换
1.	点击“开始转换”按钮。
2.	软件将开始转换过程，并在进度条中显示转换进度。
3.	转换完成后，您将在日志区域看到“转换成功”的提示。
4.5 查看日志
1.	转换过程中，日志区域会实时显示详细信息。
2.	如果遇到问题，可以参考日志信息进行排查。
5. 功能说明
5.1 文件选择
•	支持多种音视频格式，包括 mp4、avi、mov、mkv、mp3、wav 等。
•	可以通过文件选择对话框从磁盘中选择文件。
5.2 元数据显示
•	加载文件后，软件会自动读取并显示文件的元数据，包括文件大小、时长、音频采样率、视频帧率等。
5.3 输出格式选择
•	支持多种输出格式，包括 mp4、webm、mkv、mp3、wav、mov 等。
5.4 分辨率预设
•	提供多种分辨率预设（1080p、4K、2K、720p、保持原分辨率、自定义）。
•	自定义分辨率允许用户输入特定的宽度和高度。
5.5 编码器选择
•	支持多种视频编码器（libx264、libx265、vp9、复制）和音频编码器（aac、libmp3lame、opus、复制）。
5.6 质量调节
•	通过 CRF/质量滑块调节视频质量，适用于 x264/x265/vp9。
•	CRF 值越低，质量越高，文件大小也越大。
5.7 音频比特率选择
•	提供音频比特率选择器，调节音频质量，支持 32 kbps 至 320 kbps。
5.8 缩放与目标分辨率
•	支持可选的缩放因子或目标分辨率设置。
•	用户可以选择将视频宽度缩放为原始宽度的百分比，或直接输入目标分辨率。
5.9 转换进度
•	实时显示转换进度，提供用户反馈。
6. 常见问题解答
6.1 如何安装 FFmpeg 和 FFprobe？
请访问 FFmpeg 官方网站，下载适合您操作系统的二进制文件，并将 ffmpeg 和 ffprobe 的路径添加到系统的 PATH 环境变量中。
6.2 转换速度很慢，怎么办？
转换速度取决于您的硬件配置和选择的编码器。建议使用高性能的 CPU 和足够的内存。此外，某些编码器（如 libx264）在高分辨率下会消耗更多资源。
6.3 转换失败，如何排查问题？
请参考日志区域中的详细信息，查找可能的错误原因。常见的问题包括文件路径错误、编码器不支持等。
6.4 如何联系技术支持？
如果您在使用过程中遇到问题，可以通过以下方式联系技术支持：
•	邮箱：2772523895@qq.com 
7. 关于
AV Converter v1.0.1由本人开发，旨在提供高效、安全的音视频格式转换解决方案。感谢您的支持与使用！
